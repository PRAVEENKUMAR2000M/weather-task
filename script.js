//This Object have local images Urls
weatherBasedBackgroundUrls_local = {
  200: "./images/thunderstorm-3441687.jpg",
  201: "./images/thunderstorm-3441687.jpg",
  202: "./images/thunderstorm-3441687.jpg",
  210: "./images/thunderstorm-3441687.jpg",
  211: "./images/thunderstorm-3441687.jpg",
  212: "./images/thunderstorm-3441687.jpg",
  221: "./images/thunderstorm-3441687.jpg",
  230: "./images/thunderstorm-3441687.jpg",
  231: "./images/thunderstorm-3441687.jpg",
  232: "./images/thunderstorm-3441687.jpg",

  300: "./images/3xxDrizzle.gif",
  301: "./images/Drizzle.jpg",
  302: "./images/3xxDrizzle.gif",
  310: "./images/Drizzle.jpg",
  311: "./images/3xxDrizzle.gif",
  312: "./images/Drizzle.jpg",
  313: "./images/3xxDrizzle.gif",
  314: "./images/Drizzle.jpg",
  321: "./images/3xxDrizzle.gif",

  500: "./images/rain-6812.gif",
  501: "./images/rain-6812.gif",
  502: "./images/rain.gif",
  503: "./images/rain.gif",
  504: "./images/rain.gif",
  511: "./images/rain-6812.gif",
  520: "./images/rain-6812.gif",
  521: "./images/rain-6812.gif",
  522: "./images/rain.gif",
  531: "./images/rain.gif",

  600: "./images/snow.gif",
  601: "./images/snow.gif",
  602: "./images/snow.gif",
  611: "./images/snow.gif",
  612: "./images/snow.gif",
  613: "./images/snow.gif",
  615: "./images/snow.gif",
  616: "./images/snow.gif",
  620: "./images/snow.gif",
  621: "./images/snow.gif",
  622: "./images/snow.gif",

  701: "./images/mist.jpg",
  711: "./images/smoke.jpg",
  721: "./images/haze.jpg",
  731: "./images/fog.gif",
  741: "./images/fog.gif",
  751: "./images/fog.gif",
  761: "./images/fog.gif",
  762: "./images/ash.jpg",
  771: "./images/squalls.jpg",
  781: "./images/tornado.jpg",

  800: {
    clearSky_Day: "./images/clear-sky-day.jpg",
    clearSky_Night: "./images/clear-sky-night.jpg",
  },
  801: "./images/few-clouds.png",
  802: "./images/scattered-clouds.jpg",
  803: "./images/broken-clouds.jpg",
  804: "./images/overcast-clouds.jpg",
};

//this object have dropbox images CDN Urls
let weatherBasedBackgroundUrls = {
  200: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  201: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  202: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  210: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  211: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  212: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  221: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  230: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  231: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",
  232: "https://www.dropbox.com/scl/fi/og6bzfdcqrekmt9joyi2w/thunderstorm-3441687.jpg?rlkey=1mn8pzx1yfstkt11nd50qhg1n&raw=1",

  300: "https://www.dropbox.com/scl/fi/wzbioksxyb892w6um8kww/3xxDrizzle.gif?rlkey=3d93tilmt20qffd4bnlqihcvl&raw=1",
  301: "https://www.dropbox.com/scl/fi/qd6id8c8y8c1994mfq9vb/Drizzle.jpg?rlkey=eunt6fobivopmggl1lhd5tfit&raw=1",
  302: "https://www.dropbox.com/scl/fi/wzbioksxyb892w6um8kww/3xxDrizzle.gif?rlkey=3d93tilmt20qffd4bnlqihcvl&raw=1",
  310: "https://www.dropbox.com/scl/fi/qd6id8c8y8c1994mfq9vb/Drizzle.jpg?rlkey=eunt6fobivopmggl1lhd5tfit&raw=1",
  311: "https://www.dropbox.com/scl/fi/wzbioksxyb892w6um8kww/3xxDrizzle.gif?rlkey=3d93tilmt20qffd4bnlqihcvl&raw=1",
  312: "https://www.dropbox.com/scl/fi/qd6id8c8y8c1994mfq9vb/Drizzle.jpg?rlkey=eunt6fobivopmggl1lhd5tfit&raw=1",
  313: "https://www.dropbox.com/scl/fi/wzbioksxyb892w6um8kww/3xxDrizzle.gif?rlkey=3d93tilmt20qffd4bnlqihcvl&raw=1",
  314: "https://www.dropbox.com/scl/fi/qd6id8c8y8c1994mfq9vb/Drizzle.jpg?rlkey=eunt6fobivopmggl1lhd5tfit&raw=1",
  321: "https://www.dropbox.com/scl/fi/wzbioksxyb892w6um8kww/3xxDrizzle.gif?rlkey=3d93tilmt20qffd4bnlqihcvl&raw=1",

  500: "https://www.dropbox.com/scl/fi/1upcgp799maiw07n0i4jf/rain-6812.gif?rlkey=ex5amsflb0xuxo0t8ozfnv1v1&raw=1",
  501: "https://www.dropbox.com/scl/fi/1upcgp799maiw07n0i4jf/rain-6812.gif?rlkey=ex5amsflb0xuxo0t8ozfnv1v1&raw=1",
  502: "https://www.dropbox.com/scl/fi/dtsa6kznydusptt07wd8r/rain.gif?rlkey=zw6nekd1w2d9um4t0luyjnet2&raw=1",
  503: "https://www.dropbox.com/scl/fi/dtsa6kznydusptt07wd8r/rain.gif?rlkey=zw6nekd1w2d9um4t0luyjnet2&raw=1",
  504: "https://www.dropbox.com/scl/fi/dtsa6kznydusptt07wd8r/rain.gif?rlkey=zw6nekd1w2d9um4t0luyjnet2&raw=1",
  511: "https://www.dropbox.com/scl/fi/1upcgp799maiw07n0i4jf/rain-6812.gif?rlkey=ex5amsflb0xuxo0t8ozfnv1v1&raw=1",
  520: "https://www.dropbox.com/scl/fi/1upcgp799maiw07n0i4jf/rain-6812.gif?rlkey=ex5amsflb0xuxo0t8ozfnv1v1&raw=1",
  521: "https://www.dropbox.com/scl/fi/1upcgp799maiw07n0i4jf/rain-6812.gif?rlkey=ex5amsflb0xuxo0t8ozfnv1v1&raw=1",
  522: "https://www.dropbox.com/scl/fi/dtsa6kznydusptt07wd8r/rain.gif?rlkey=zw6nekd1w2d9um4t0luyjnet2&raw=1",
  531: "https://www.dropbox.com/scl/fi/dtsa6kznydusptt07wd8r/rain.gif?rlkey=zw6nekd1w2d9um4t0luyjnet2&raw=1",

  600: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  601: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  602: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  611: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  612: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  613: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  615: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  616: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  620: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  621: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",
  622: "https://www.dropbox.com/scl/fi/wdecyzkxol279ingw6spj/snow.gif?rlkey=xo18y6py7g59783hnwgcguahj&raw=1",

  701: "https://www.dropbox.com/scl/fi/ujb4etjly3306jfjlh9hl/mist.jpg?rlkey=5ufczi4ptar6b71y6u967f00l&raw=1",
  711: "https://www.dropbox.com/scl/fi/a82c8klmspy4gy9el62va/smoke.jpg?rlkey=rpzcsx43hitvooyfarl76f0hz&raw=1",
  721: "https://www.dropbox.com/scl/fi/lwsn0lwvb2lprrtlow5p1/haze.jpg?rlkey=h6xyui4mek0r33wb15jx1gvpo&raw=1",
  731: "https://www.dropbox.com/scl/fi/k77zkflxbslmlvs0dhutr/fog.gif?rlkey=pqbpal8kew0d8gbqx64xxoccw&raw=1",
  741: "https://www.dropbox.com/scl/fi/k77zkflxbslmlvs0dhutr/fog.gif?rlkey=pqbpal8kew0d8gbqx64xxoccw&raw=1",
  751: "https://www.dropbox.com/scl/fi/k77zkflxbslmlvs0dhutr/fog.gif?rlkey=pqbpal8kew0d8gbqx64xxoccw&raw=1",
  761: "https://www.dropbox.com/scl/fi/k77zkflxbslmlvs0dhutr/fog.gif?rlkey=pqbpal8kew0d8gbqx64xxoccw&raw=1",
  762: "https://www.dropbox.com/scl/fi/1dww34xmzmlsv8zqcgmvg/ash.jpg?rlkey=nl5cohlf3xlxzhndbbyg8e5ef&raw=1",
  771: "https://www.dropbox.com/scl/fi/ryrvew2r5dfs5ipz26dub/squalls.jpg?rlkey=h54rbjci8b4d0gu3gbm7agh8k&raw=1",
  781: "https://www.dropbox.com/scl/fi/zh1p63a4mw6r4w1228lgr/tornado.jpg?rlkey=6z6wdwc3d7hxh9j06pwqf6wz4&raw=1",

  800: {
    clearSky_Day:
      "https://www.dropbox.com/scl/fi/z7w459dcqlru9qsi61mq8/clear-sky-day.jpg?rlkey=q6hrydn2c0bxz8hvo0hsd9cyb&raw=1",
    clearSky_Night:
      "https://www.dropbox.com/scl/fi/86t94rwfvrabt9ckg9rpy/clear-sky-night.jpg?rlkey=1dke83gsl676rxxl14ztfj46l&raw=1",
  },
  801: "https://www.dropbox.com/scl/fi/0aq33jhvu3co32kzwzpsm/few-clouds.png?rlkey=hncoh3me5yxzgt6rtqy33q116&raw=1",
  802: "https://www.dropbox.com/scl/fi/bbyuvh9nzuepsltauw2le/scattered-clouds.jpg?rlkey=86gm4dhoqwry2iejwnmhjcegg&raw=1",
  803: "https://www.dropbox.com/scl/fi/xa5e25ochlz2409uiehl3/broken-clouds.jpg?rlkey=u88yyjw2mp83fe6bucqbqy28z&raw=1",
  804: "https://www.dropbox.com/scl/fi/78dbf2y0ouxmyqyydiil8/overcast-clouds.jpg?rlkey=gywm7jm8itxoxf4dlfbhlfrih&raw=1",
};

//get city from user using thease input and button
let searchCity = document.getElementById("searchCity");
let searchBtn = document.getElementById("searchBtn");

//this will show currunt date and time
let currentTime = document.getElementById("currentTime");
let dateDate = document.getElementById("date");

//get user location using this button
let getLoactionBtn = document.getElementById("getLoactionBtn");

//api data weather time
let weather_time = document.getElementById("weather_time");

//sunrise and sunset time
let sunrise = document.getElementById("sunrise");
let sunset = document.getElementById("sunset");

//user latitude & longitude element
let latitude = document.getElementById("latitude");
let longitude = document.getElementById("longitude");

//api data like a pressure, wind_Speed, wind_Direction, cloudiness, humidity will store hear
let pressure = document.getElementById("pressure");
let wind_Speed = document.getElementById("wind_Speed");
let wind_Direction = document.getElementById("wind_Direction");
let cloudiness = document.getElementById("cloudiness");
let humidity = document.getElementById("humidity");

//user latitude & longitude will store hear initialy it will 0
let user_latitude = 0;
let user_longitude = 0;

//this will get user location by user's permission popup from browser navigator
navigator.geolocation.getCurrentPosition(sucess, fail);

//if user allow location acces permission this sucess function will run
function sucess(data) {
  //store latitude & longitude
  user_latitude = data.coords.latitude;
  user_longitude = data.coords.longitude;

  //call the getWeatherData using user coordinates latitude & longitude
  getWeatherData(user_latitude, user_longitude);
}

//if user deny the location permission this function will run
function fail(error) {
  //user denied location permission so we will take "chennai" as a default city
  //then call api
  searchCity.value = "chennai";

  //then trigger searchBtn
  searchBtn.click();
  console.error(error.message);
}

//
getLoactionBtn.addEventListener("click", () => {
  navigator.geolocation.getCurrentPosition(sucess, fail);
});

setInterval(() => {
  let date = new Date();
  currentTime.textContent = date.toLocaleTimeString();
  options = { year: "numeric", day: "numeric", month: "long" };

  dateDate.textContent = date.toLocaleDateString(undefined, options);
  /* getCurrentTime_Date(date); */
}, "1000");

//enter key event listener added to input searchCity
searchCity.addEventListener("keyup", (e) => {
  if (e.key === "Enter") {
    getWeatherData();
  }
});

//searchBtn event listener added and call getWeatherData
searchBtn.addEventListener("click", getWeatherData);

//this function will check user user_Latitude, user_Longitude are valid or not
function isLatitude_Longitude_Valid(lat, lon) {
  //check each type
  if (typeof lat !== "object" && typeof lon !== "object") {
    return true;
  } else {
    return false;
  }
}

//this asyn function will get weather datas from API call
async function getWeatherData(user_Latitude, user_Longitude) {
  //get serachCity input value
  let cityNameInput = searchCity.value.toLocaleLowerCase();
  //api url will store hear
  let apiURL = ``;

  //this condition will check user_Latitude,user_Longitude and serachCity input value and change aoi url
  if (
    isLatitude_Longitude_Valid(user_Latitude, user_Longitude) &&
    cityNameInput == ""
  ) {
    //this api url will use user_Latitude,user_Longitude to make an API call
    apiURL = `https://api.openweathermap.org/data/2.5/weather?lat=${user_Latitude}&lon=${user_Longitude}&appid=df113f3fb6ba52bb81ac2f6079e28f36
    `;
  } else {
    //this api url will use city name to make an API call
    apiURL = `https://api.openweathermap.org/data/2.5/weather?q=${cityNameInput}&appid=df113f3fb6ba52bb81ac2f6079e28f36`;
  }

  //this will api call using fetch and get response as promise
  let response = await fetch(apiURL);

  //check response status
  if (response.status == 200) {
    //convert api response promise to json and store hear
    let responseData = await response.json();
    //get body element for background change
    let body = document.getElementsByTagName("body")[0];

    //display api data latitude longitude
    latitude.textContent = responseData.coord.lat;
    longitude.textContent = responseData.coord.lon;

    //get sunrise and sunset data from api and convert to javascript date and store into sunriseTime, sunsetTime
    //display sunrise and sunset data using inbuild methode toLocaleTimeString()
    let sunriseTime = new Date(responseData.sys.sunrise * 1000);
    sunrise.textContent = sunriseTime.toLocaleTimeString();
    let sunsetTime = new Date(responseData.sys.sunset * 1000);
    sunset.textContent = sunsetTime.toLocaleTimeString();

    let weatherId = (data) => {
      let res = "";

      if (data === 800) {
        let now = new Date();
        if (now.getHours() > 6 && now.getHours() <= 19) {
          res = weatherBasedBackgroundUrls_local[800].clearSky_Day;
        } else {
          res = weatherBasedBackgroundUrls_local[800].clearSky_Night;
        }
      } else {
        res = weatherBasedBackgroundUrls_local[responseData.weather[0].id];
      }
      return res;
    };

    //change body background image based on api weather data
    body.style.background = ` url('${
      //get imsge url from local weatherBasedBackgroundUrls_local Object
      weatherId(responseData.weather[0].id)
    }'), linear-gradient(to right, #0f0c29, #302b63 , #24243e)`;

    //display city name from api weather data
    let cityName = document.getElementById("cityName");
    cityName.textContent = responseData.name;

    //display weather_Description from api weather data
    let weather_Description = document.getElementById("weather_Description");
    weather_Description.textContent = responseData.weather[0].description;

    //display feels_like temperature details from api weather data
    let feels_like = document.getElementById("feels_like");
    feels_like.innerHTML =
      " Feels Like " +
      (responseData.main.feels_like - 273.15).toFixed() +
      "&deg;c";

    //display weather icon details from api weather data
    let icon = document.createElement("img"); //get icon element
    icon.alt = responseData.weather[0].main;

    //display temperature details from api responseData
    let temperature = document.getElementById("temperature");
    temperature.innerHTML =
      (responseData.main.temp - 273.15).toFixed() +
      `&deg;c  <img src="./images/icons/${responseData.weather[0].icon}.png" width="100px"alt="${responseData.weather[0].main}" id="icon"/>`;

    //display weatherData_time details from api responseData
    let weatherData_time = new Date(responseData.dt * 1000);
    weather_time.innerHTML = `${weatherData_time.toDateString()} <br> ${weatherData_time.toLocaleTimeString()}`;

    //display other details [pressure,wind_Speed,wind_Direction,cloudiness,humidity] from api responseData
    pressure.innerHTML = `${responseData.main.pressure} hPa`;
    wind_Speed.innerHTML = `${responseData.wind.speed} m/s`;
    wind_Direction.innerHTML = `${responseData.wind.deg}&deg; `;
    cloudiness.innerHTML = `${responseData.clouds.all}&percnt;`;
    humidity.innerHTML = `${responseData.main.humidity}&percnt;`;

    //change the searchCity input value
    searchCity.value = "";

    //call getThreeHoursData funtion and pass latitude and longitude as an argument
    getThreeHoursData(responseData.coord.lat, responseData.coord.lon);
    getAirQualityAndComponents(responseData.coord.lat, responseData.coord.lon);
  } else {
    //api request faild this alart will show
    alert(`Please Enter Correct City Name 
                  or 
      Click Location Button or Clear site settings in browser`);
    //change the searchCity input value
    searchCity.value = "";
  }
}

//get navHeadList element
let navHeadList = document.getElementById("navHeadList");

//this function will genrate three hours weather data for dive days
//and this function will get latitude and longitude as an parameters
async function getThreeHoursData(lat, lon) {
  //API url for Three Hours Data
  const apiURLThreeHours = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=df113f3fb6ba52bb81ac2f6079e28f36&units=metric`;

  //API call using fetch
  let apiResponse = await fetch(apiURLThreeHours);
  //api response promise to json
  let apiResponseData = await apiResponse.json();

  //creat dayWise Object to store api response list
  let dayWise = {};

  //iterate apiResponseData.list and short the data as per that date
  for (let i = 0; i < apiResponseData.list.length; i++) {
    //creat Date object for each API data
    let apiDate = new Date(apiResponseData.list[i].dt * 1000);

    //get date from that Date Object
    let date = apiDate.getDate();

    //check that dayWise Object have that Data or not
    if (dayWise[date]) {
      //  dayWise Object have that same date it will push that data into dayWise[date] array
      dayWise[date].push(apiResponseData.list[i]);
    } else {
      // dayWise Object don't have that date it will creat array of data in  dayWise Object
      dayWise[date] = [apiResponseData.list[i]];
    }
  }

  //get tabContent element it have all Three Hours Data
  let tabContent = document.getElementById("tabContent");

  //this listHeadData array will have all heading data as list item
  let listHeadData = [];

  //This Loop iterate daywise object
  for (let key in dayWise) {
    //Creat Date Object for each array first value from dayWise object
    //so that we can  creat heading with that date
    let headDate = new Date(dayWise[key][0].dt * 1000);
    let day = headDate.toDateString().split(" ").slice(0, -1).join(" ");

    //creat listItem for heading and add API data into it
    let listItem = `<li class="nav-item " role="presentation" id="">
    <button class="nav-link " id="day${headDate.getDate()}" data-bs-toggle="pill" data-bs-target="#day_${headDate.getDate()}" type="button" role="tab" aria-controls="pills" aria-selected="false">${day}<img src="https://openweathermap.org/img/wn/${
      dayWise[key][0].weather[0].icon
    }@2x.png" alt=""></button>`;

    //add list item into list head
    listHeadData.push(listItem);
    navHeadList.innerHTML = listHeadData.join(" "); //remove , symple

    //select all link from listHeadData
    let navHeadItem = document.querySelectorAll(".nav-link");
    //make first element active
    navHeadItem[0].classList.add("active");
    navHeadItem[0].ariaSelected = true;

    //Creat element for daywise three hours content
    let tabPane = document.createElement("div");
    let tabPaneID_link = `day_${headDate.getDate()}`;
    tabPane.className = "tab-pane fade";
    tabPane.id = tabPaneID_link;

    //check that element exist or not
    if (document.getElementById(tabPaneID_link) === null) {
      tabContent.appendChild(tabPane);
    }

    //get each Three Hours data from each day and creat html structor for that
    dayWise[key].forEach((day) => {
      let days = new Date(day.dt * 1000);
      let hoursID = `day_${days.getDate()}`;

      //this will check that data was associat with correct tab or not
      if (tabPane.id == hoursID) {
        let cardMainBody = document.createElement("div");
        cardMainBody.className =
          "card-body d-lg-flex flex-row align-items-center border-bottom";
        tabPane.appendChild(cardMainBody);
        cardMainBody.innerHTML = `
            <div class="card-body">
              <h4 class="card-title">
                ${day.main.temp}&deg; 
                <img 
                src="https://openweathermap.org/img/wn/${
                  day.weather[0].icon
                }@2x.png" 
                alt="${day.weather[0].description}" />
              </h4>
              <span>${day.weather[0].description}</span>
              <p>Feels Like ${day.main.feels_like} &deg;</p>
              <h6>${days.toLocaleTimeString()}</h6>
            </div>
  
            <ul class="list-group w-75 " id="threeHour_Data">
              <li class="list-group-item  fs-6">
                Pressure
                <span class="badge bg-primary rounded-pill fs-6">
                ${day.main.pressure} hPa
                </span>
              </li>
              <li class="list-group-item  fs-6">
              Humidity
              <span class="badge bg-primary rounded-pill fs-6">
              ${day.main.humidity}&percnt;
              </span>
              </li>
              <li class="list-group-item  fs-6">
              Cloudiness
              <span class="badge bg-primary rounded-pill fs-6">
              ${day.clouds.all}&percnt;
              </span>
              </li>
              <li class="list-group-item  fs-6">
              Wind Speed
              <span class="badge bg-primary rounded-pill fs-6">
              ${day.wind.speed}m/s
              </span>
              </li>
              <li class="list-group-item  fs-6">
              wind Direction
              <span class="badge bg-primary rounded-pill fs-6">
              ${day.wind.deg}&deg;
              </span>
              </li>
            </ul>`;
      }
    });
  }
  //first tab automaticaly active
  let tabPaneAll = document.querySelectorAll(".tab-pane");
  tabPaneAll[0].classList.add("active", "show");
}
//get airQuality element to show air quality
let airQualityElement = document.getElementById("airQuality");

//this function will genarate air quality and components details
async function getAirQualityAndComponents(latitude, longitude) {
  //api URL for Air Quality
  const apiUrl = `https://api.openweathermap.org/data/2.5/air_pollution?lat=${latitude}&lon=${longitude}&appid=091b7f41321f245cc017efa80d0f97d0`;

  //API call
  const airApiResponse = await fetch(apiUrl);

  //API response promise to json
  const airApiResponseData = await airApiResponse.json();

  //get air quality index from API data
  let airQuality = airApiResponseData.list[0].main.aqi;

  //creat element for showing air quality
  let airBadge = `<span class="badge "></span>`;
  airQualityElement.innerHTML = `Air Quality ${airBadge}`;

  //this statment will creat air badge as per that API result
  switch (airQuality) {
    case 1: {
      airQualityElement.children[0].classList.add("bg-success");
      airQualityElement.children[0].textContent = "Good";
      break;
    }
    case 2: {
      airQualityElement.children[0].classList.add("bg-primary");
      airQualityElement.children[0].textContent = "Fair";
      break;
    }
    case 3: {
      airQualityElement.children[0].classList.add("bg-info");
      airQualityElement.children[0].textContent = "Moderate";
      break;
    }
    case 4: {
      airQualityElement.children[0].classList.add("bg-warning");
      airQualityElement.children[0].textContent = "Poor";
    }
    case 5: {
      airQualityElement.children[0].classList.add("bg-danger");
      airQualityElement.children[0].textContent = "Very Poor";
      break;
    }
  }

  //get air components elements
  let carbon_monoxide = document.getElementById("carbon_monoxide");
  let nitric_oxide = document.getElementById("nitric_oxide");
  let nitrogen_dioxide = document.getElementById("nitrogen_dioxide");
  let Ozone = document.getElementById("Ozone");
  let sulfur_dioxide = document.getElementById("sulfur_dioxide");
  let fineParticles = document.getElementById("fineParticles");
  let coarseParticles = document.getElementById("coarseParticles");
  let ammonia = document.getElementById("ammonia");

  //show air components in list
  carbon_monoxide.innerHTML = `${airApiResponseData.list[0].components.co} <abbr title="Micrograms per cubic meter" >&micro;g/m<sup>3</sup></abbr>`;
  nitric_oxide.innerHTML = `${airApiResponseData.list[0].components.no} <abbr title="Micrograms per cubic meter" >&micro;g/m<sup>3</sup></abbr>`;
  nitrogen_dioxide.innerHTML = `${airApiResponseData.list[0].components.no2} <abbr title="Micrograms per cubic meter" >&micro;g/m<sup>3</sup></abbr>`;
  Ozone.innerHTML = `${airApiResponseData.list[0].components.o3} <abbr title="Micrograms per cubic meter" >&micro;g/m<sup>3</sup></abbr>`;
  sulfur_dioxide.innerHTML = `${airApiResponseData.list[0].components.so2} <abbr title="Micrograms per cubic meter" >&micro;g/m<sup>3</sup></abbr>`;
  fineParticles.innerHTML = `${airApiResponseData.list[0].components.pm2_5} <abbr title="Micrograms per cubic meter" >&micro;g/m<sup>3</sup></abbr>`;
  coarseParticles.innerHTML = `${airApiResponseData.list[0].components.pm10} <abbr title="Micrograms per cubic meter" >&micro;g/m<sup>3</sup></abbr>`;
  ammonia.innerHTML = `${airApiResponseData.list[0].components.nh3} <abbr title="Micrograms per cubic meter" >&micro;g/m<sup>3</sup></abbr>`;
}
